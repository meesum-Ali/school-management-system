import{j as e,L as m,r as i,P as f,U as p,G as g,ad as y,ae as j}from"./index-C8VS4fXx.js";import{C as N,B as l}from"./Card-OmK6nwwd.js";import{N as w}from"./Notification-B1yMlq7q.js";const v=({users:n,onDelete:c})=>e.jsxs(N,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"User Management"}),e.jsx(l,{component:m,to:"/admin/users/create",children:"Create User"})]}),n.length===0?e.jsx("p",{children:"No users found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roles"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.username}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.email}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[t.firstName||""," ",t.lastName||""]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.roles.join(", ")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.isActive?e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"}):e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-right",children:[e.jsx(l,{component:m,to:`/admin/users/${t.id}`,variant:"outline",size:"sm",className:"mr-2",children:"Edit"}),e.jsx(l,{variant:"destructive",size:"sm",onClick:()=>c(t.id),children:"Delete"})]})]},t.id))})]})})]}),k=()=>{const[n,c]=i.useState([]),[t,d]=i.useState(!0),[o,a]=i.useState(null),x=async()=>{try{d(!0),a(null);const s=await y();c(s)}catch(s){const r=s instanceof Error?s.message:"Failed to fetch users.";a(r),console.error(s)}finally{d(!1)}};i.useEffect(()=>{x()},[]);const h=async s=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{a(null),await j(s),x()}catch(r){const u=r instanceof Error?r.message:"Failed to delete user.";a(u),console.error(r)}};return e.jsx(f,{requiredRoles:[p.SCHOOL_ADMIN,p.SUPER_ADMIN],children:e.jsxs(g,{children:[" ",e.jsxs("div",{className:"container mx-auto p-4",children:[o&&e.jsx(w,{message:o,type:"error",onClose:()=>a(null)}),t?e.jsx("p",{className:"text-center",children:"Loading users..."}):e.jsx(v,{users:n,onDelete:h})]})]})})};export{k as default};
