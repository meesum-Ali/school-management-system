import{u as g,r as t,j as s,P as C,U as u,G as j,I as h,$ as E}from"./index-C8VS4fXx.js";import{S as b}from"./StudentForm-B92cLI0L.js";import{N as m}from"./Notification-B1yMlq7q.js";import"./index.esm-BWXX6-1U.js";import"./Input-BklDdty6.js";import"./Card-OmK6nwwd.js";import"./Select-DOi9PUKF.js";const F=()=>{const d=g(),[x,o]=t.useState(!1),[l,a]=t.useState(null),[f,S]=t.useState([]),[n,r]=t.useState(null);t.useEffect(()=>{(async()=>{try{r(null);const e=await h();S(e)}catch(e){const c=e instanceof Error?e.message:"Failed to load classes for selection.";console.error(c),r(c)}})()},[]);const p=async i=>{o(!0),a(null);try{await E(i),d("/admin/students")}catch(e){a(e instanceof Error?e.message:"Failed to create student."),console.error(e),o(!1)}};return s.jsx(C,{requiredRoles:[u.SCHOOL_ADMIN,u.TEACHER],children:s.jsx(j,{children:s.jsx("div",{className:"container mx-auto p-4 flex justify-center",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[l&&s.jsx(m,{message:l,type:"error",onClose:()=>a(null)}),n&&s.jsx(m,{message:n,type:"error",onClose:()=>r(null)}),s.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:"Create New Student"}),s.jsx(b,{onSubmit:p,isSubmitting:x,availableClasses:f})]})})})})};export{F as default};
