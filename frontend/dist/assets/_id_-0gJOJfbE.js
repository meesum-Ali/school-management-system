import{u as U,M as N,r as a,j as e,P as l,U as d,G as u,ag as y,ah as S}from"./index-C8VS4fXx.js";import{U as E}from"./UserForm-BP8cefV7.js";import{N as b}from"./Notification-B1yMlq7q.js";import"./index.esm-BWXX6-1U.js";import"./Input-BklDdty6.js";import"./Card-OmK6nwwd.js";const w=()=>{const h=U(),{id:t}=N(),[o,p]=a.useState(void 0),[m,n]=a.useState(!0),[j,x]=a.useState(!1),[i,r]=a.useState(null);a.useEffect(()=>{t&&typeof t=="string"?(async()=>{try{n(!0),r(null);const s=await y(t);p(s)}catch(s){const c=s instanceof Error?s.message:"Failed to fetch user data.";r(c),console.error(s)}finally{n(!1)}})():n(!1)},[t]);const g=async f=>{if(!(!t||typeof t!="string")){x(!0),r(null);try{await S(t,f),h("/admin/users")}catch(s){const c=s instanceof Error?s.message:"Failed to update user.";r(c),console.error(s),x(!1)}}};return m?e.jsx(l,{requiredRoles:[d.SCHOOL_ADMIN],children:e.jsx(u,{children:e.jsx("div",{className:"container mx-auto p-4 text-center",children:"Loading user data..."})})}):!o&&!i?e.jsx(l,{requiredRoles:[d.SCHOOL_ADMIN],children:e.jsx(u,{children:e.jsx("div",{className:"container mx-auto p-4 text-center",children:"User not found."})})}):e.jsx(l,{requiredRoles:[d.SCHOOL_ADMIN],children:e.jsxs(u,{children:[" ",e.jsx("div",{className:"container mx-auto p-4 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[" ",i&&e.jsx(b,{message:i,type:"error",onClose:()=>r(null)}),e.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:"Edit User"}),o?e.jsx(E,{user:o,onSubmit:g,isSubmitting:j}):!m&&e.jsx("p",{className:"text-center text-red-500",children:"User data could not be loaded or user not found."})]})})]})})};export{w as default};
