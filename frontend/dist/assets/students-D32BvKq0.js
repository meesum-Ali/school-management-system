import{j as e,L as m,r as i,P as u,U as p,G as y,Z as f,_ as g}from"./index-C8VS4fXx.js";import{C as j,B as d}from"./Card-OmK6nwwd.js";import{N}from"./Notification-B1yMlq7q.js";const w=({students:r,onDelete:n})=>e.jsxs(j,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Student Management"}),e.jsx(d,{component:m,to:"/admin/students/create",children:"Create Student"})]}),r.length===0?e.jsx("p",{children:"No students found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"First Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date of Birth"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.firstName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.lastName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.studentId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.dateOfBirth?new Date(t.dateOfBirth).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.currentClassName||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-right",children:[e.jsx(d,{component:m,to:`/admin/students/${t.id}`,variant:"outline",size:"sm",className:"mr-2",children:"Edit"}),e.jsx(d,{variant:"destructive",size:"sm",onClick:()=>n(t.id),children:"Delete"})]})]},t.id))})]})})]}),L=()=>{const[r,n]=i.useState([]),[t,l]=i.useState(!0),[x,a]=i.useState(null),o=async()=>{try{l(!0),a(null);const s=await f();n(s)}catch(s){a(s instanceof Error?s.message:"Failed to fetch students."),console.error(s)}finally{l(!1)}};i.useEffect(()=>{o()},[]);const h=async s=>{if(window.confirm("Are you sure you want to delete this student?"))try{a(null),await g(s),o()}catch(c){a(c instanceof Error?c.message:"Failed to delete student."),console.error(c)}};return e.jsx(u,{requiredRoles:[p.SCHOOL_ADMIN,p.SUPER_ADMIN],children:e.jsxs(y,{children:[" ",e.jsxs("div",{className:"container mx-auto p-4",children:[x&&e.jsx(N,{message:x,type:"error",onClose:()=>a(null)}),t?e.jsx("p",{children:"Loading students..."}):e.jsx(w,{students:r,onDelete:h})]})]})})};export{L as default};
