import{r as t,U as h,j as e}from"./index-C8VS4fXx.js";import{u as N,o as j,c as v,b as g,d as E,a as d}from"./index.esm-BWXX6-1U.js";import{I as n}from"./Input-BklDdty6.js";import{C as y,B as U}from"./Card-OmK6nwwd.js";function A({title:s,titleId:i,...c},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},c),s?t.createElement("title",{id:i},s):null,t.createElement("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"}),t.createElement("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"}),t.createElement("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"}))}const F=t.forwardRef(A);function k({title:s,titleId:i,...c},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},c),s?t.createElement("title",{id:i},s):null,t.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),t.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"}))}const R=t.forwardRef(k),S=v().shape({username:d().required("Username is required"),email:d().email("Invalid email format").required("Email is required"),password:d().when("$isEditing",{is:s=>!s,then:s=>s.required("Password is required").min(8,"Password must be at least 8 characters"),otherwise:s=>s.min(8,"Password must be at least 8 characters").optional().nullable()}),firstName:d().optional(),lastName:d().optional(),isActive:E().optional(),roles:g().of(d().oneOf(Object.values(h))).min(1,"At least one role is required").required()}),P=({user:s,onSubmit:i,isSubmitting:c})=>{const r=!!s,[x,u]=t.useState(!1),{register:m,handleSubmit:b,setValue:o,control:C,formState:{errors:a},watch:$}=N({resolver:j(S),context:{isEditing:r},defaultValues:r?{...s,password:"",roles:s?.roles||[h.STUDENT]}:{username:"",email:"",password:"",firstName:"",lastName:"",isActive:!0,roles:[h.STUDENT]}});t.useEffect(()=>{r&&s&&(o("username",s.username),o("email",s.email),o("firstName",s.firstName||""),o("lastName",s.lastName||""),o("isActive",s.isActive),o("roles",s.roles))},[s,r,o]);const f=l=>{const p={...l};r&&!p.password&&delete p.password,i(p)},w=Object.values(h);return e.jsxs(y,{className:"w-full max-w-2xl",children:[" ",e.jsxs("form",{onSubmit:b(f),className:"space-y-6",children:[" ",e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center",children:r?"Edit User":"Create New User"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block mb-1 font-medium",children:"Username"}),e.jsx(n,{id:"username",type:"text",...m("username"),className:a.username?"border-red-500":""}),a.username&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.username.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-1 font-medium",children:"Email"}),e.jsx(n,{id:"email",type:"email",...m("email"),className:a.email?"border-red-500":""}),a.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block mb-1 font-medium",children:"First Name (Optional)"}),e.jsx(n,{id:"firstName",type:"text",...m("firstName")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block mb-1 font-medium",children:"Last Name (Optional)"}),e.jsx(n,{id:"lastName",type:"text",...m("lastName")})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"password",className:"block mb-1 font-medium",children:r?"New Password (Optional)":"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"password",type:x?"text":"password",...m("password"),className:`pr-10 ${a.password?"border-red-500":""}`}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>u(!x),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 focus:outline-none","aria-label":x?"Hide password":"Show password",children:x?e.jsx(F,{className:"h-5 w-5"}):e.jsx(R,{className:"h-5 w-5"})})})]}),a.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Roles"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:w.map(l=>e.jsxs("label",{htmlFor:`role-${l}`,className:"flex items-center space-x-2 p-2 border border-gray-300 rounded-md hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:`role-${l}`,value:l,...m("roles"),className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsx("span",{children:l.charAt(0).toUpperCase()+l.slice(1)})]},l))}),a.roles&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.roles.message})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"isActive",type:"checkbox",...m("isActive"),className:"form-checkbox h-5 w-5 text-blue-600 mr-2"}),e.jsx("label",{htmlFor:"isActive",className:"font-medium",children:"Active User"}),a.isActive&&e.jsx("p",{className:"text-red-500 text-sm ml-2",children:a.isActive.message})]}),e.jsx(U,{type:"submit",disabled:c,className:"w-full md:w-auto",children:c?"Submitting...":r?"Update User":"Create User"})]})]})};export{P as U};
