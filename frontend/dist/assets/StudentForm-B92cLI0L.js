import{r as f,j as e}from"./index-C8VS4fXx.js";import{u as N,o as u,c as b,a as l}from"./index.esm-BWXX6-1U.js";import{I as i}from"./Input-BklDdty6.js";import{C as I,B as j}from"./Card-OmK6nwwd.js";import{S as p}from"./Select-DOi9PUKF.js";const S=b().shape({firstName:l().required("First name is required"),lastName:l().required("Last name is required"),dateOfBirth:l().required("Date of birth is required").test("is-valid-date","Invalid date format",s=>s?!isNaN(Date.parse(s)):!1),email:l().email("Invalid email").required("Email is required"),studentId:l().required("Student ID is required"),classId:l().uuid("Must be a valid UUID if provided").nullable()}),D=({student:s,onSubmit:c,isSubmitting:m,availableClasses:n})=>{const{register:t,handleSubmit:o,setValue:B,formState:{errors:a},reset:d}=N({resolver:u(S),defaultValues:{firstName:s?.firstName||"",lastName:s?.lastName||"",dateOfBirth:s?.dateOfBirth?new Date(s.dateOfBirth).toISOString().split("T")[0]:"",email:s?.email||"",studentId:s?.studentId||"",classId:s?.classId||null}}),x=r=>{const h={...r,classId:r.classId||null};c(h)};return f.useEffect(()=>{d(s?{...s,dateOfBirth:s.dateOfBirth?new Date(s.dateOfBirth).toISOString().split("T")[0]:"",classId:s.classId||null}:{firstName:"",lastName:"",dateOfBirth:"",email:"",studentId:"",classId:null})},[s,d]),e.jsx(I,{className:"w-full max-w-lg",children:e.jsxs("form",{onSubmit:o(x),className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl mb-4",children:s?"Edit Student":"Create New Student"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block mb-1 font-medium",children:"First Name"}),e.jsx(i,{id:"firstName",type:"text",...t("firstName"),className:a.firstName?"border-red-500":""}),a.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.firstName.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block mb-1 font-medium",children:"Last Name"}),e.jsx(i,{id:"lastName",type:"text",...t("lastName"),className:a.lastName?"border-red-500":""}),a.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.lastName.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateOfBirth",className:"block mb-1 font-medium",children:"Date of Birth"}),e.jsx(i,{id:"dateOfBirth",type:"date",...t("dateOfBirth"),className:a.dateOfBirth?"border-red-500":""}),a.dateOfBirth&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.dateOfBirth.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-1 font-medium",children:"Email"}),e.jsx(i,{id:"email",type:"email",...t("email"),className:a.email?"border-red-500":""}),a.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"studentId",className:"block mb-1 font-medium",children:"Student ID"}),e.jsx(i,{id:"studentId",type:"text",...t("studentId"),className:a.studentId?"border-red-500":""}),a.studentId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.studentId.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"classId",className:"block mb-1 font-medium",children:"Assign to Class"}),e.jsxs(p,{id:"classId",...t("classId"),className:a.classId?"border-red-500":"",children:[e.jsx("option",{value:"",children:"No Class / Unassign"}),n.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),a.classId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.classId.message})]}),e.jsx(j,{type:"submit",disabled:m,children:m?"Submitting...":s?"Update Student":"Create Student"})]})})};export{D as S};
